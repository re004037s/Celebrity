<h4 class="movie-title d-inline-flex"><%= movie.title %></h4>
<div class="movie">
  <% param = '?rel=0&amp;controls=0&amp' %>
  <iframe src="<%= movie.path + param %>" frameborder="0" allowfullscreen></iframe>
</div>
<% if @category.must_view %>
  <p class="text-center">
    <% if current_user.feedbacks.find_by(movie_id: movie.id) %>
      <button type="button" id="show-form<%= movie.sort_order %>" class="btn btn-lg mv-comp btn-comp">感想送信済み</button>
    <% else %>
      <button type="button" id="show-form<%= movie.sort_order %>" class="btn btn-lg mv-comp">感想を提出する</button>
    <% end %>
  </p>
<% end %>

<div id="movie-layer" class="movie-layer" style="background-color:yellow; display:none;"></div>

<script>




  (function() {

    var iframes = document.querySelectorAll("iframe");
    
    iframes[0].onload = function() {
      console.log('hay')
        console.log(iframes);
        var modal_layer = $('#movie-layer'); 
        // トップフレーズを表示する
        let top_phrase = $('.top-phrase').text();
        // modalを表示する
        modal_layer.html(top_phrase);
        // モーダルを表示状態にする
        modal_layer.show();
        
        // モーダルのcss設定
        modal_layer.css(
          {'z-index' : '9999',
          'background-color': 'black',
          'color': '#F8C810',
          'text-align' : 'right',
          'line-height' : '2em',
          'font-size' : '1.5em',
          'position':'relative',
          'top': '34px',
          'height':'30px',
          'width' : '500px',s
          }
        );
        

        // HTMLとして出力する
        $('.movie-title').after(modal_layer);
        
        // todo window widthが1261px以上になったらmodal-formのwidthをmax-width:500pxにしたい
        
    };
    
})();


</script>

<script>
  // モーダルのcss設定
  
$(window).on('load resize', function(){
  var modal_layer = $('.movie-layer');
  sW = window.innerWidth;
	let adjustLayout = (sW <= 1261) 
	? {'width' :'100%', 'font-size' : '1vw'} 
	: {'width' : '500px'};

  modal_layer.css(adjustLayout);

});
  
</script>





