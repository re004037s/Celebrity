<% if current_user.try(:admin) ||
Feedback.where(user_id: current_user).count < 
Movie.where(movie_category_id: MovieCategory.where(must_view: true).ids).count %>
  <%= render 'top/top_index' %>

<% elsif 
Feedback.where(user_id: current_user).count == 
Movie.where(movie_category_id: MovieCategory.where(must_view: true).ids).count &&
current_user.html_css_status.schedule_date.blank? ||
current_user.javascript_status.schedule_date.blank? ||
current_user.ruby_status.schedule_date.blank? ||
current_user.rubyonrails_status.schedule_date.blank? ||
current_user.railstutorial_status.schedule_date.blank? %>
  <%= render 'top/show' %>

<% elsif 
Feedback.where(user_id: current_user).count == 
Movie.where(movie_category_id: MovieCategory.where(must_view: true).ids).count &&
current_user.html_css_status.schedule_date.present? ||
current_user.javascript_status.schedule_date.present? ||
current_user.ruby_status.schedule_date.present? ||
current_user.rubyonrails_status.schedule_date.present? ||
current_user.railstutorial_status.schedule_date.present? %>
  <%= render 'top/top_index' %>

<% end %>