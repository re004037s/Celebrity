<h1 class="txt2">サロンメンバー</h1>

<table class="table table-bordered table-striped table-index">
  <thead>
    <tr>
      <th width=15% class="table-header">ユーザ名</th>
        <% if @current_user.admin %>
          <th width=10% class="table-header">氏名</th>
          <th width=20% class="table-header">メアド</th>
        <% end %>
      <th width=10% class="table-header">動画視聴率</th>
      <th width=10% class="table-header">Progate</th>
      <th width=10% class="table-header">Rails Tutorial</th>
      <th class="table-header">ポートフォリオ</th>
      <th class="table-header">GitHub</th>
    </tr>
  </thead>
  <% @users.each do |user| %>
    <% if user.existence %>
      <tbody>
        <tr>
          <td><%= user.nickname %></td>
            <% if @current_user.admin %>
              <td><%= link_to user.name, user_path(user, user_id: user.id) %></td>
              <td><%= user.email %></td>
            <% end %>
          <td><%= percent_movie(user) %>%</td>
          <td><%= percent_progate(user) %>%</td>
          <td><%= count_rails_tutorial(user) %>章完了</td>
          <td>
            <%= link_to user.try(:portfolio_path), class: "btn btn-sm#{' disabled' if user.try(:portfolio_path).nil?}", target: '_blank' do %>
              <div class="t_1">ポートフォリオ</div>
            <% end %>
            <% if user.try(:portfolio_path).nil? %><% else %>
              <%= link_to 'コメント', portfolio_path(id: user.id), class: "t_1 btn btn-sm-1" %>
            <% end %>
          </td>
          <td>
            <%= link_to user.try(:github_path), class: "btn btn-sm#{' disabled' if user.try(:github_path).nil?}", target: '_blank' do %>
              <div class="t_1">GitHub</div>
            <% end %>
          </td>
        </tr>
      </tbody>
    <% end %>
  <% end %>
</table>
<div id="paginate">
  <%= paginate @users %>
</div>