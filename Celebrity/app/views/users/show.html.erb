<h1 class="txt2">進捗詳細</h1>

<h2 class="txt3">
  <%= @user.nickname %>
  [ <%= @user.name %> ]
</h2>

<table class="txt1 table-condensed table-status-schedule">
   <tr valign="baseline">
     <td width="60%">
      <h3 class="txt3">[Progate] HTML&CSS　<span class="font-schedule">完了予定日
      <%= @user.html_css_status.try(:schedule_date) if @user.html_css_status.schedule_date.present? %></span></h3>
      </td>
      <td>
      <%= form_for(@user.html_css_status, url: html_css_schedule_path ) do |f| %>
      <input style="width:100%" type="date" name="date">
      </td>
      <td width="20%">
      <%= f.submit "登録", class: "btn btn-schedule" %>
      <% end %>
      </td>
  </tr>
</table>
<table class="txt1 table table-bordered table-striped table-condensed table-status">
  <thead>
    <tr>
      <th class="table-header">コース</th>
      <th class="table-header">ステータス</th>
      <th class="table-header">完了日</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>学習コース/初級</td>
      <td class="center"><%= @user.html_css_status.try(:ga_beginner) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:ga_beginner_compd) %></td>
    </tr>
    <tr>
      <td>学習コース/中級</td>
      <td class="center"><%= @user.html_css_status.try(:ga_middle) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:ga_middle_compd) %></td>
    </tr>
    <tr>
      <td>学習コース/上級</td>
      <td class="center"><%= @user.html_css_status.try(:ga_advanced) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:ga_advanced_compd) %></td>
    </tr>
    <tr>
      <td>道場コース/初級</td>
      <td class="center"><%= @user.html_css_status.try(:do_beginner) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:do_beginner_compd) %></td>
    </tr>
    <tr>
      <td>道場コース/中級</td>
      <td class="center"><%= @user.html_css_status.try(:do_middle) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:do_middle_compd) %></td>
    </tr>
    <tr>
      <td>道場コース/上級</td>
      <td class="center"><%= @user.html_css_status.try(:do_advanced) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:do_advanced_compd) %></td>
    </tr>
    <tr>
      <td>実践コース 1</td>
      <td class="center"><%= @user.html_css_status.try(:ji_1) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:ji_1_compd) %></td>
    </tr>
    <tr>
      <td>実践コース 2</td>
      <td class="center"><%= @user.html_css_status.try(:ji_2) ? '完了' : '未' %></td>
      <td><%= @user.html_css_status.try(:ji_2_compd) %></td>
    </tr>
  </tbody>
</table>


<table class="txt1 table-condensed table-status-schedule">
   <tr valign="baseline">
    <td width="60%">
      <h3 class="txt3">[Progate] JavaScript　<span class="font-schedule">完了予定日
      <%= @user.javascript_status.try(:schedule_date) if @user.javascript_status.schedule_date.present? %><span class="font-schedule"></h3>
    </td>
    <td>
      <%= form_for(@user.javascript_status, url: javascript_schedule_path ) do |f| %>
      <input style="width:100%" type="date" name="date">
    </td>
    <td width="20%">
      <%= f.submit "登録", class: "btn btn-schedule" %>
      <% end %>
    </td>
  </tr>
</table>
<table class="txt1 table table-bordered table-striped table-condensed table-status">
  <thead>
    <tr>
      <th class="table-header">コース</th>
      <th class="table-header">ステータス</th>
      <th class="table-header">完了日</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>学習コース1</td>
      <td class="center"><%= @user.javascript_status.try(:ga_1) ? '完了' : '未' %></td>
      <td><%= @user.javascript_status.try(:ga_beginner_compd)%></td>
    </tr>
    <tr>
      <td>学習コース2</td>
      <td class="center"><%= @user.javascript_status.try(:ga_2) ? '完了' : '未' %></td>
      <td><%= @user.javascript_status.try(:ga_beginner_compd)%></td>
    </tr>
    <tr>
      <td>学習コース3</td>
      <td class="center"><%= @user.javascript_status.try(:ga_3) ? '完了' : '未' %></td>
      <td><%= @user.javascript_status.try(:ga_beginner_compd)%></td>
    </tr>
    <tr>
      <td>学習コース4</td>
      <td class="center"><%= @user.javascript_status.try(:ga_4) ? '完了' : '未' %></td>
      <td><%= @user.javascript_status.try(:ga_beginner_compd)%></td>
    </tr>
    <tr>
      <td>道場コース1</td>
      <td class="center"><%= @user.javascript_status.try(:do_1) ? '完了' : '未' %></td>
      <td><%= @user.javascript_status.try(:do_beginner_compd) %></td>
    </tr>
    
  </tbody>
</table>

<table class="txt1 table-condensed table-status-schedule">
   <tr valign="baseline">
    <td width="60%">
      <h3 class="txt3">[Progate] Ruby　<span class="font-schedule">完了予定日
      <%= @user.ruby_status.try(:schedule_date) if @user.ruby_status.schedule_date.present? %></span></h3>
    </td>
    <td>
      <%= form_for(@user.ruby_status, url: ruby_schedule_path ) do |f| %>
      <input style="width:100%" type="date" name="date">
    </td>
    <td width="20%">
      <%= f.submit "登録", class: "btn btn-schedule" %>
      <% end %>
    </td>
  </tr>
</table>
<table class="txt1 table table-bordered table-striped table-condensed table-status">
  <thead>
    <tr>
      <th class="table-header">コース</th>
      <th class="table-header">ステータス</th>
      <th class="table-header">完了日</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>学習コース 1</td>
      <td class="center"><%= @user.ruby_status.try(:ga_1) ? '完了' : '未' %></td>
      <td><%= @user.ruby_status.try(:ga_1_compd) %></td>
    </tr>
    <tr>
      <td>学習コース 2</td>
      <td class="center"><%= @user.ruby_status.try(:ga_2) ? '完了' : '未' %></td>
      <td><%= @user.ruby_status.try(:ga_2_compd) %></td>
    </tr>
    <tr>
      <td>学習コース 3</td>
      <td class="center"><%= @user.ruby_status.try(:ga_3) ? '完了' : '未' %></td>
      <td><%= @user.ruby_status.try(:ga_3_compd) %></td>
    </tr>
    <tr>
      <td>学習コース 4</td>
      <td class="center"><%= @user.ruby_status.try(:ga_4) ? '完了' : '未' %></td>
      <td><%= @user.ruby_status.try(:ga_4_compd) %></td>
    </tr>
    <tr>
      <td>学習コース 5</td>
      <td class="center"><%= @user.ruby_status.try(:ga_5) ? '完了' : '未' %></td>
      <td><%= @user.ruby_status.try(:ga_5_compd) %></td>
    </tr>
  </tbody>
</table>

<table class="txt1 table-condensed table-status-schedule">
   <tr valign="baseline">
    <td width="60%">
      <h3 class="txt3">[Progate] Ruby on Rails　<span class="font-schedule">完了予定日
      <%= @user.rubyonrails_status.try(:schedule_date) if @user.rubyonrails_status.schedule_date.present? %></span></h3>
    </td>
    <td>
      <%= form_for(@user.rubyonrails_status, url: rubyonrails_schedule_path ) do |f| %>
      <input style="width:100%" type="date" name="date">
    </td>
    <td width="20%">
      <%= f.submit "登録", class: "btn btn-schedule" %>
      <% end %>
    </td>
  </tr>
</table>
<table class="txt1 table table-bordered table-striped table-condensed table-status">
  <thead>
    <tr>
      <th class="table-header">コース</th>
      <th class="table-header">ステータス</th>
      <th class="table-header">完了日</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>学習コース 1</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_1) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_1_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 2</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_2) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_2_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 3</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_3) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_3_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 4</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_4) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_4_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 5</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_5) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_5_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 6</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_6) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_6_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 7</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_7) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_7_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 8</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_8) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_8_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 9</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_9) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_9_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 10</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_10) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_10_compd) %></td>
    </tr>

    <tr>
      <td>学習コース 11</td>
      <td class="center"><%= @user.rubyonrails_status.try(:ga_11) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:ga_11_compd) %></td>
    </tr>

    <tr>
      <td>道場コース 1</td>
      <td class="center"><%= @user.rubyonrails_status.try(:do_1) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:do_1_compd) %></td>
    </tr>

    <tr>
      <td>道場コース 2</td>
      <td class="center"><%= @user.rubyonrails_status.try(:do_2) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:do_2_compd) %></td>
    </tr>

    <tr>
      <td>道場コース 3</td>
      <td class="center"><%= @user.rubyonrails_status.try(:do_3) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:do_3_compd) %></td>
    </tr>

    <tr>
      <td>道場コース 4</td>
      <td class="center"><%= @user.rubyonrails_status.try(:do_4) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:do_4_compd) %></td>
    </tr>
      <tr>
      <td>道場コース 5</td>
      <td class="center"><%= @user.rubyonrails_status.try(:do_4) ? '完了' : '未' %></td>
      <td><%= @user.rubyonrails_status.try(:do_4_compd) %></td>
    </tr>
  </tbody>
</table>

<table class="txt1 table-condensed table-status-schedule">
   <tr valign="baseline">
    <td width="60%">
      <h3 class="txt3">Rails Tutorial　<span class="font-schedule">完了予定日
      <%= @user.railstutorial_status.try(:schedule_date) if @user.railstutorial_status.schedule_date.present? %></span></h3>
    </td>
    <td>
      <%= form_for(@user.railstutorial_status, url: railstutorial_schedule_path ) do |f| %>
      <input style="width:100%" type="date" name="date">
    </td>
    <td width="20%">
      <%= f.submit "登録", class: "btn btn-schedule" %>
      <% end %>
    </td>
  </tr>
</table>
<table class="txt1 table table-bordered table-condensed table-status">
  <tr>
    <td class="table-header">完了した章</td>
    <td class="center"><%= count_rails_tutorial(@user) %>章</td>
  </tr>
</table>

<table class="txt1 table-condensed table-status-schedule">
   <tr valign="baseline">
    <td width="60%">
      <h3 class="txt3">動画視聴　<span class="font-schedule">完了予定日
      <%= @user.user_movie_status.try(:schedule_date) if @user.user_movie_status.schedule_date.present? %></span></h3>
    </td>
    <td>
      <%= form_for(@user.user_movie_status, url: user_movie_schedule_path) do |f| %>
      <input style="width:100%" type="date" name="date">
    </td>
    <td width="20%">
      <%= f.submit "登録", class: "btn btn-schedule" %>
      <% end %>
    </td>
  </tr>
</table>

<table class="txt1 table table-bordered table-striped table-condensed table-status">
  <thead>
    <tr>
      <th width=25% class="table-header">動画名</th>
      <th width=15% class="table-header">ステータス</th>
      <th class="table-header">感想</th>
    </tr>
  </thead>
  <% @categories.each do |category| %>
    <% category.movies.order('sort_order').each do |movie| %>
      <% feedback = @user.feedbacks.find_by(movie_id: movie.id) %>
      <tbody>
        <tr>
          <td><%= movie.title %></td>
          <td class="center"><%= feedback.present? ? '完了' : '未' %></td>
          <td><%= feedback.present? ? feedback.feedback : '-' %></td>
        </tr>
      </tbody>
    <% end %>
  <% end %>
</table>

<div class="form-button">
  <% if current_user.admin %>
    <%= link_to 'ユーザ削除', @user, method: :delete, class: 'btn btn-danger user-delete',
        data: { confirm: '本当に削除しますか？' } %>
  <% end %>
  <%= link_to 'ユーザ編集', edit_user_path(@user) , class: 'btn btn-primary user-edit' %>
</div>